<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rationale &mdash; Ragger 1.3.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
    <link rel="shortcut icon" href="_static/ragger.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Installation" href="installation.html" />
    <link href="_static/layout.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Ragger
          </a>
              <div class="version">
                1.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">How is this doc structured:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rationale</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#abstracting-the-backends">Abstracting the backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="#easing-the-development-of-application-clients">Easing the development of application clients</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#navigation">Navigation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ragger</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Rationale</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/rationale.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="rationale">
<span id="id1"></span><h1>Rationale<a class="headerlink" href="#rationale" title="Permalink to this heading"></a></h1>
<p>Testing, easily manipulating a Ledger <a class="reference internal" href="glossary.html#term-Application"><span class="xref std std-term">application</span></a> is hard. Although
<a class="reference internal" href="glossary.html#term-Speculos"><span class="xref std std-term">Speculos</span></a> strongly eases it, it cannot always replace IRL tests on
physical devices.</p>
<p>There are libraries allowing to communicate with a physical device. However,
it would be very convenient to be able to develop code which would be compatible
wherever the application runs, either on an emulator or on a physical device.</p>
<p>On top of this, all these libraries provides low-level functions like pressing a
button or sending APDUs. Applications can be complex pieces of software and
testing one require higher-level code.</p>
<div class="section" id="abstracting-the-backends">
<h2>Abstracting the backends<a class="headerlink" href="#abstracting-the-backends" title="Permalink to this heading"></a></h2>
<p>The original goal of <code class="docutils literal notranslate"><span class="pre">Ragger</span></code> is to make the manipulation of an
<a class="reference internal" href="glossary.html#term-Application"><span class="xref std std-term">application</span></a> oblivious of the underlying device. Most applications are
tested against <a class="reference internal" href="glossary.html#term-Speculos"><span class="xref std std-term">Speculos</span></a>, the Ledger device emulator, but it is not
always enough, and testing on real physical devices is often required.</p>
<p><code class="docutils literal notranslate"><span class="pre">Ragger</span></code> provides an interface which wraps several libraries:</p>
<ul class="simple">
<li><p>one emulator-only library: <a class="reference internal" href="glossary.html#term-Speculos"><span class="xref std std-term">Speculos</span></a> (which uses itself as an emulator),</p></li>
<li><p>two agnostic libraries, which can communicate with either a physical device,
or an emulated one:</p>
<ul>
<li><p><a class="reference internal" href="glossary.html#term-LedgerComm"><span class="xref std std-term">LedgerComm</span></a></p></li>
<li><p><a class="reference internal" href="glossary.html#term-LedgerWallet"><span class="xref std std-term">LedgerWallet</span></a></p></li>
</ul>
</li>
</ul>
<p>In <code class="docutils literal notranslate"><span class="pre">Ragger</span></code>, the classes embedding these libraries are called
<a class="reference internal" href="glossary.html#term-Backend"><span class="xref std std-term">backends</span></a>. Any other backend can be added, given it respects the
<a class="reference internal" href="source.html#ragger.backend.BackendInterface" title="ragger.backend.BackendInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">BackendInterface</span></code></a> interface.</p>
<figure class="">
            <a 
               data-lightbox="group-8fa8ae31-ce4c-437f-87f2-111bfcd1a877"
               href="_images/usage.svg"
               title="Software / communication layers between an application and its client"
               data-title="Software / communication layers between an application and its client"
               
               ><img src="_images/usage.svg"
                     class="align-center"
                     width="90%"
                     height="auto"
                     alt=""/>
                </a><figcaption>Software / communication layers between an application and its client</figcaption>
            </figure><p>Application <a class="reference internal" href="glossary.html#term-Client"><span class="xref std std-term">clients</span></a> using <code class="docutils literal notranslate"><span class="pre">Ragger</span></code> must comply with this
interface to communicate with the application. Once it’s done, the client
can communicate with an application running either on top of an emulator or on
a real, physical device with very little cost.</p>
<p>Why not <strong>no</strong> cost? That’s because the backend actually needs to talk to
something. Speculos is conveniently able to start its emulator itself, however
the other backends will need the application to be already started. Typically,
the application will have to be installed on a physical device, started, and the
device connected to the computer launching the client.</p>
<p>How to exploit these capabilities to write test running on both emulated or
physical device is documented in the <a class="reference internal" href="tutorial.html#tutorial"><span class="std std-ref">tutorial section</span></a>.</p>
</div>
<div class="section" id="easing-the-development-of-application-clients">
<h2>Easing the development of application clients<a class="headerlink" href="#easing-the-development-of-application-clients" title="Permalink to this heading"></a></h2>
<p>On top of abstracting the backend, <code class="docutils literal notranslate"><span class="pre">Ragger</span></code> provides tools and mechanisms
allowing to ease the development of application clients and write more thorough
tests.</p>
<div class="section" id="navigation">
<h3>Navigation<a class="headerlink" href="#navigation" title="Permalink to this heading"></a></h3>
<p>In particular, <code class="docutils literal notranslate"><span class="pre">Ragger</span></code> offers abstraction layers to declare application flows
without repeating oneself. This is the role of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Navigator</span></code> interface.</p>
<p>This class allows to declare a set of
<code class="xref py py-class docutils literal notranslate"><span class="pre">navigation</span> <span class="pre">instructions</span></code>) which, bound with
callbacks, allows to abstract the expected behavior of an application.</p>
<p>Once the instructions are declared, it is possible to declare feature flows as
a list of instructions.</p>
<figure class="">
            <a 
               data-lightbox="group-8633d600-7bbc-41cd-8aff-054ede029179"
               href="_images/navigate.svg"
               title="Software / communication layers between an application and its client"
               data-title="Software / communication layers between an application and its client"
               
               ><img src="_images/navigate.svg"
                     class="align-center"
                     width="90%"
                     height="auto"
                     alt=""/>
                </a><figcaption>Software / communication layers between an application and its client</figcaption>
            </figure><p>The <code class="docutils literal notranslate"><span class="pre">Navigator</span></code> class also offers (with Speculos) screenshot checking
capabilities: while the instructions are performed, <code class="docutils literal notranslate"><span class="pre">Ragger</span></code> takes screenshots
of the application’s screen, and is able to save them or compare them with
<a class="reference internal" href="glossary.html#term-Golden-snapshot"><span class="xref std std-term">golden snapshots</span></a> to check if the application behaves
as expected.</p>
<p>This does not sound like much, but as soon as an application get a bit complex,
it helps a lot to write code which on the first hand manipulate high-level
concept as validating a transaction, and on the other hand deal with low-level
details such as crafting an <a class="reference internal" href="glossary.html#term-APDU"><span class="xref std std-term">APDU</span></a> and click on a button at the right time.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, bow.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>